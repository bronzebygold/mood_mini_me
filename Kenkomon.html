<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.1/addons/p5.sound.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <script src="sketch.js"></script>
    <div>
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http:s//www.w3.org/1999/xlink" x="0px" y="0px"
            width="300px" height="300px" viewBox="0 0 300 300" enable-background="new 0 0 300 300" xml:space="preserve">
            <path fill="0" id="eggpath" d="M286.667,194.27c0,82.842-55.119,105.73-137.957,105.73S13.333,276.252,13.333,193.41
C13.333,110.566,65.874,0,148.711,0S286.667,111.426,286.667,194.27z" />
        </svg>
    </div>
    <script>
        // TODO: Extract SVG creation class to general class for drawing SVG into pixels
        // How it works
        // (1) Create array for canvas 
        // (2) Create an array for the drawn SVG object, by walking along it
        // (3a) Draw the white pixel squares
        // (3b) Compare the arrays from (1) and (2), 
        // if the drawn SVG object coordinate falls within the canvas square, 
        // make that fill a black square

        let canvArray = [];
        let eggArray = [];
        const eggPath = document.getElementById("eggpath");
        const pathLength = eggPath.getTotalLength();

        function setup() {
            createCanvas(300, 300);

            let x = 0;
            while (x < 30) {
                for (var i = 0; i < 30; i++) {
                    xCoOrd = i * 10;
                    yCoOrd = x * 10;
                    canvArray.push([xCoOrd, yCoOrd]);
                }
                x += 1
            }

            for (let n = 0; n < pathLength; n += 1) {
                const path_x = eggPath.getPointAtLength(n).x * 0.6;
                const path_y = eggPath.getPointAtLength(n).y * 0.6;
                eggArray.push([path_x, path_y]);
            }
            console.log(eggArray);

        }

        function draw() {

            background(220);
            noStroke();

            for (let j = 0; j < canvArray.length; j++) {
                fill(255);
                let rect_x = canvArray[j][0];
                let rect_y = canvArray[j][1];
                for (let v = 0; v < eggArray.length; v++) {
                    let egg_x = eggArray[v][0];
                    let egg_y = eggArray[v][1];
                     if (((egg_x > rect_x)&& (egg_x < (rect_x+9))) && 
                        ((egg_y > rect_y) && (egg_y < (rect_y + 9)))) {
                        fill(0);
                     }
                }
                rect(rect_x, rect_y, 9, 9);
            }

            


            // for (let v = 0; )

            // console.log(eggArray)
            
            // while (x < 30) {
            //     for (var i = 0; i < 30; i++) {
            //         xCoOrd = i * 10;
            //         yCoOrd = x * 10;
            //         rect(xCoOrd, yCoOrd, 9, 9);
            //     }
            //     x += 1
            // }
        }
        
        console.log('Length', eggPath.getTotalLength())
        console.log(eggPath.getPointAtLength(100))</script>
</body>

</html>